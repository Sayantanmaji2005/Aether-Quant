services:
  - type: web
    name: aether-quant-web
    env: python
    plan: free
    buildCommand: pip install -e .
    startCommand: uvicorn aetherquant.web.app:create_app --factory --host 0.0.0.0 --port $PORT
    envVars:
      - key: AETHERQ_LOG_LEVEL
        value: INFO
      - key: AETHERQ_DEFAULT_SYMBOL
        value: SPY
      - key: AETHERQ_INITIAL_CASH
        value: 100000
      - key: AETHERQ_COMMISSION_BPS
        value: "1.0"
      - key: AETHERQ_SLIPPAGE_BPS
        value: "0.5"
      - key: AETHERQ_RATE_LIMIT_PER_MINUTE
        value: "120"
      - key: AETHERQ_LIVE_BROKER_PROVIDER
        value: generic-rest
      - key: AETHERQ_LIVE_BROKER_DRY_RUN
        value: "true"
      - key: AETHERQ_API_KEY
        generateValue: true
      - key: AETHERQ_ADMIN_API_KEY
        generateValue: true
      - key: AETHERQ_DATABASE_URL
        fromDatabase:
          name: aether-quant-db
          property: connectionString

databases:
  - name: aether-quant-db
    plan: free
